# MongoDB Setup Steps - Quick Reference

After the code is ready, follow these steps to set up MongoDB Atlas:

## Step-by-Step MongoDB Atlas Setup

### 1. Create Account & Cluster (5 min)
- Go to: https://www.mongodb.com/cloud/atlas/register
- Sign up (free)
- Create **M0 FREE** cluster
- Choose region closest to you
- Wait 3-5 minutes for cluster creation

### 2. Create Database User (2 min)
- Click "Database Access" in left sidebar
- Click "Add New Database User"
- Choose "Password" authentication
- Username: `feedback_admin` (or your choice)
- Password: Click "Autogenerate Secure Password" **OR** create your own
- **⚠️ IMPORTANT**: Copy and save the password!
- Privileges: "Atlas admin"
- Click "Add User"

### 3. Configure Network Access (2 min)
- Click "Network Access" in left sidebar
- Click "Add IP Address"
- Click "Allow Access from Anywhere" (0.0.0.0/0)
- Click "Confirm"
- This allows Render to connect to your database

### 4. Get Connection String (3 min)
- Click "Database" in left sidebar
- Click "Connect" on your cluster
- Choose "Drivers"
- Driver: **Python**
- Copy the connection string
- It looks like:
  ```
  mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority
  ```

### 5. Customize Connection String (2 min)
- Replace `<username>` with your database username
- Replace `<password>` with your database password
- Add database name: Add `/feedback_db` before the `?`
- Final format:
  ```
  mongodb+srv://feedback_admin:YourPassword123@cluster0.xxxxx.mongodb.net/feedback_db?retryWrites=true&w=majority
  ```
- **Save this connection string!** You'll need it for Render.

### 6. Test Locally (Optional)
- Add to your `.env` file:
  ```
  MONGODB_URI=mongodb+srv://feedback_admin:YourPassword123@cluster0.xxxxx.mongodb.net/feedback_db?retryWrites=true&w=majority
  ```
- Run: `python app.py`
- Check console for: `✓ MongoDB connected successfully`

### 7. Add to Render (During Deployment)
- In Render dashboard → Your Service → Environment
- Add environment variable:
  - Key: `MONGODB_URI`
  - Value: Your connection string from step 5
- Save and redeploy

## Common Issues & Solutions

### Issue: Special Characters in Password
**Solution**: Use MongoDB's autogenerated password, or URL-encode special characters:
- `@` → `%40`
- `#` → `%23`
- `$` → `%24`

### Issue: Connection Timeout
**Solution**: 
- Check Network Access allows 0.0.0.0/0
- Verify connection string is correct
- Check cluster is running (not paused)

### Issue: Authentication Failed
**Solution**:
- Double-check username and password
- Ensure database user has proper permissions
- Try creating a new database user

## Verification

After setup, verify:
1. ✅ Cluster is running (green status)
2. ✅ Database user created
3. ✅ Network Access allows 0.0.0.0/0
4. ✅ Connection string saved
5. ✅ Test connection works (if testing locally)

## What Happens Next?

Once MongoDB is set up:
- Your app will automatically use MongoDB when `MONGODB_URI` is set
- Data will persist across deployments
- You can view data in MongoDB Atlas → Browse Collections
- Free tier includes 512 MB storage (plenty for this project!)

---

**Full detailed guide**: See [MONGODB_SETUP.md](MONGODB_SETUP.md)

